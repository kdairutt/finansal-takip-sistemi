<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Para Uzmanı - Varlıklarım</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/varliklar.css">
</head>
<body>

    <!-- Üst Menü (giriş sonrası) -->
    <div class="top-bar">
        <div class="top-bar-inner">
            <div class="logo">
                <a href="dashboard.html">Para Uzmanı</a>
            </div>

            <ul class="top-menu">
                <li><a href="dashboard.html">Ana Ekran</a></li>
                <li><a href="profil.html">Profil</a></li>
                <li><a href="varliklar.html" class="active">Varlıklarım</a></li>
                <li><a href="borclar.html">Borçlarım</a></li>
                <li><a href="gelirler.html">Gelirlerim</a></li>
                <li><a href="giderler.html">Giderlerim</a></li>
                <li><a href="faiz.html">Faiz Hesapla</a></li>
                <li><a href="doviz.html">Döviz &amp; Kıymetli Maden</a></li>
                <li><a href="#" class="disabled-link">Tahmini Gelir–Gider</a></li>
                <li><a href="index.html" class="logout-btn" onclick="cikisYap()">Çıkış Yap</a></li>
            </ul>
        </div>
    </div>

    <!-- Ana İçerik -->
    <div class="container">

        <div class="page-header">
            <h1>Varlıklarım</h1>
            <p>
                Bu sayfada banka hesabın, nakit paran ve yatırım varlıkların gibi finansal 
                varlıklarını listeleyebilirsin. Aşağıdaki formdan yeni varlık ekleyebilir,
                tablo üzerinden genel durumunu görebilirsin.
            </p>
        </div>

        <!-- Özet kart: toplam varlık -->
        <div class="summary-card">
            <div class="summary-title">Toplam Varlıklar</div>
            <div class="summary-value" id="toplam-varlik">0 TL</div>
            <div class="summary-extra">
                Aşağıdaki tabloya eklediğin tüm varlıkların toplam tutarı burada gösterilir.
            </div>
        </div>

        <!-- Varlık ekleme formu -->
        <div class="card">
            <h2>Yeni Varlık Ekle</h2>
            <p>Temel varlık bilgilerini girerek listeye ekleyebilirsin.</p>

            <div class="form-group">
                <label for="varlik-adi">Varlık Adı</label>
                <input type="text" id="varlik-adi" placeholder="Örn: Banka Hesabı, Nakit, Altın">
            </div>

            <div class="form-group">
                <label for="varlik-turu">Varlık Türü</label>
                <input type="text" id="varlik-turu" placeholder="Örn: Mevduat, Nakit, Gram Altın">
            </div>

            <div class="form-group">
                <label for="varlik-tutar">Tutar (TL)</label>
                <input type="number" id="varlik-tutar" placeholder="Örn: 5000">
            </div>

            <div class="form-group">
                <label for="varlik-not">Not (isteğe bağlı)</label>
                <input type="text" id="varlik-not" placeholder="Örn: Öğrenci hesabı, acil durum birikimi vb.">
            </div>

            <button class="btn btn-primary" onclick="varlikEkle()">Varlık Ekle</button>
        </div>

        <!-- Varlıklar tablosu -->
        <div class="card">
            <h2>Varlık Listesi</h2>
            <p>Eklediğin varlıklar aşağıdaki tabloda gösterilir. İstersen satırları silebilirsin.</p>

            <table>
                <thead>
                    <tr>
                        <th>Varlık Adı</th>
                        <th>Türü</th>
                        <th>Tutar (TL)</th>
                        <th>Not</th>
                        <th>İşlem</th>
                    </tr>
                </thead>
                <tbody id="varlik-tablo-govde">
                    <!-- Başlangıçta örnek 1-2 satır -->
                    <tr>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>

    <!-- Basit JS -->
    <script>
        // Çıkış yap fonksiyonu
        function cikisYap() {
            var cevap = confirm("Çıkış yapmak istediğinize emin misiniz?");
            if (cevap == true) {
                window.location = "index.html";
            }
        }

        // Sayfadaki mevcut satırlara göre toplam varlığı hesapla
        function toplamVarligiHesapla() {
            var hucreler = document.getElementsByClassName("tutar-hucre");
            var toplam = 0;

            for (var i = 0; i < hucreler.length; i++) {
                var deger = Number(hucreler[i].textContent);
                if (!isNaN(deger)) {
                    toplam = toplam + deger;
                }
            }

            document.getElementById("toplam-varlik").textContent = toplam + " TL";
            localStorage.setItem("toplamVarlik", toplam);
        }

        // Yeni varlık ekle
        function varlikEkle() {
            var ad = document.getElementById("varlik-adi").value;
            var tur = document.getElementById("varlik-turu").value;
            var tutar = document.getElementById("varlik-tutar").value;
            var not = document.getElementById("varlik-not").value;

            if (ad == "" || tur == "" || tutar == "") {
                alert("Lütfen varlık adı, türü ve tutar alanlarını doldur.");
                return;
            }

            var tabloGovde = document.getElementById("varlik-tablo-govde");

            // Yeni satır oluştur
            var yeniSatir = document.createElement("tr");

            var hucreAd = document.createElement("td");
            hucreAd.textContent = ad;

            var hucreTur = document.createElement("td");
            hucreTur.textContent = tur;

            var hucreTutar = document.createElement("td");
            hucreTutar.textContent = tutar;
            hucreTutar.className = "tutar-hucre";

            var hucreNot = document.createElement("td");
            hucreNot.textContent = not;

            var hucreIslem = document.createElement("td");
            var silButonu = document.createElement("button");
            silButonu.textContent = "Sil";
            silButonu.className = "btn-delete";
            silButonu.setAttribute("onclick", "varlikSil(this)");
            hucreIslem.appendChild(silButonu);

            // Satıra hücreleri ekle
            yeniSatir.appendChild(hucreAd);
            yeniSatir.appendChild(hucreTur);
            yeniSatir.appendChild(hucreTutar);
            yeniSatir.appendChild(hucreNot);
            yeniSatir.appendChild(hucreIslem);

            // Tabloya satırı ekle
            tabloGovde.appendChild(yeniSatir);

            // Toplam varlık değerini güncelle
            toplamVarligiHesapla();

            // Formu temizle
            document.getElementById("varlik-adi").value = "";
            document.getElementById("varlik-turu").value = "";
            document.getElementById("varlik-tutar").value = "";
            document.getElementById("varlik-not").value = "";
        }

        // Varlık sil
        function varlikSil(buton) {
            var cevap = confirm("Bu varlığı silmek istediğine emin misin?");
            if (cevap == false) {
                return;
            }

            // Butonun bulunduğu satırı bul ve sil
            var satir = buton.parentNode.parentNode;
            satir.parentNode.removeChild(satir);

            // Toplam varlığı tekrar hesapla
        }

        // Sayfa ilk yüklendiğinde localStorage'daki değeri sadece göster
        function toplamVarligiGoster() {
            var kayitliToplam = localStorage.getItem("toplamVarlik");

            if (kayitliToplam !== null) {
                document.getElementById("toplam-varlik").textContent = kayitliToplam + " TL";
            } else {
                document.getElementById("toplam-varlik").textContent = "0 TL";
            }
        }

        // Sayfa yüklenince sadece göster, hesaplama yapıp sıfırlama
        window.onload = function () {
            toplamVarligiGoster();
        };

    </script>

</body>
</html>